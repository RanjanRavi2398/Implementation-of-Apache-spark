{"version":"NotebookV1","origId":4259324615413932,"name":"04_the_bias_variance_tradeoff","language":"python","commands":[{"version":"CommandV1","origId":4259324615413933,"guid":"e4a0d52a-5388-4de5-993c-466b47836a1f","subtype":"command","commandType":"auto","position":1.0,"command":"\n%md-sandbox\n\n<div style=\"text-align: center; line-height: 0; padding-top: 9px;\">\n  <img src=\"https://databricks.com/wp-content/uploads/2018/03/db-academy-rgb-1200px.png\" alt=\"Databricks Learning\" style=\"width: 600px\">\n</div>","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"7763687e-4102-4732-a47d-9be5338b4c24"},{"version":"CommandV1","origId":4259324615413934,"guid":"b526f8d3-34b0-489d-bb03-233171ea8fcb","subtype":"command","commandType":"auto","position":2.0,"command":"%md\n# The Bias-Variance Tradeoff","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"0e66284b-e193-4350-b318-2fadf4457d79"},{"version":"CommandV1","origId":4259324615413935,"guid":"604eae49-d5dd-4888-8018-0164d4c6e09e","subtype":"command","commandType":"auto","position":3.0,"command":"%md\n## Configuration","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"fd703bb7-98e0-4083-8945-16ec9dbfffb3"},{"version":"CommandV1","origId":4259324615413936,"guid":"5d1ab4f9-e4b3-4b0d-a9a5-214313a7c482","subtype":"command","commandType":"auto","position":4.0,"command":"%run ./includes/configuration","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"052bed94-404e-44e7-b875-a9f0c1f7cbc7"},{"version":"CommandV1","origId":4259324615413937,"guid":"ad7d40a2-f97a-4134-931a-11664cfb2554","subtype":"command","commandType":"auto","position":5.0,"command":"%md\n### Load Data and Scipy Libraries","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"db8084a5-5b9b-46b2-83e5-7624797ae551"},{"version":"CommandV1","origId":4259324615413938,"guid":"291593f0-34e6-4ced-8171-ceb6d0fa1625","subtype":"command","commandType":"auto","position":6.0,"command":"%run ./includes/preprocessing","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"3c1c907a-00fe-4ef9-9110-71011e66a9c5"},{"version":"CommandV1","origId":4259324615413939,"guid":"abef1d93-437f-4c2b-baf0-fda7dbe49912","subtype":"command","commandType":"auto","position":7.0,"command":"%md\n## The Bias-Variance Tradeoff\n\nIn this notebook, we are interested in the uncertainty associated with\na particular classification model.\n\nWhen measuring the uncertainty of a model, we are frequently\ninterested in:\n\n- the **bias** of that model\n   - how well it performs classification\n- the **variance** of that model\n   â€” how much the model will differ if fit using different training data\n\nMinimizing bias will frequently increase the variance and vice\nversa. An optimal model will simultaneously minimize both bias and variance.\nThis simultaneous minimization the Bias-Variance Tradeoff.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"423992ff-3d18-40cf-9e80-7671655d9461"},{"version":"CommandV1","origId":4259324615413940,"guid":"f243012c-5af1-459a-94c8-9937edad0295","subtype":"command","commandType":"auto","position":8.0,"command":"%md\n### Model Selection\n\nIn this notebook, we will examine many different models for predicting\nour target prepared using our feature data. Each of these models\nwill be prepared using a different subset of the four features:\n\n- `mean_resting_heartrate`\n- `mean_active_heartrate`\n- `mean_BMI`\n- `mean_VO2_max`\n\nWe will use the estimated bias and variance of each of these models\nto assess which model or models is likely to be the optimal model.\n\nWe will also consider the complexity of each model relative to the\nestimated bias and variance.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"93c4a13a-67fc-452c-bf0d-00d518d01875"},{"version":"CommandV1","origId":4259324615413941,"guid":"f4957c9f-9b43-41bc-8324-0cd0a14e03a0","subtype":"command","commandType":"auto","position":9.0,"command":"%md\n### Estimating Bias and Variance with the Bootstrap\n\nThe **bootstrap** is a method for estimating uncertainty, in this\ncase uncertainty associated with bias and variance.\n\nThe method involves generating a series of subsample sets by\nsampling with replacement from our dataset.\n\nWe will then fit a particular model under examination against\neach of the bootstrap subsample sets.\n\nThe **accuracy mean** across the models fit to each\nsubsample set will be used to estimate **bias**.\n\nThe **accuracy standard deviation** across the models fit to each\nsubsample set will be used to estimate **variance**.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"7ce5964f-801f-4c99-84f6-7b993405725d"},{"version":"CommandV1","origId":4259324615413942,"guid":"f9feaedb-8a81-49ca-a9af-5ee2d470a2de","subtype":"command","commandType":"auto","position":10.0,"command":"%md\n### Bootstrap Generator\n\nIn the next cell, we define a function to generate bootstrap samples.\n\n\uD83D\uDCAA\uD83C\uDFFC Note that we make sure to sample evenly across each of the\nthree lifestyles.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"d53f1bd4-ef9f-437b-a57a-9bbefa690cdb"},{"version":"CommandV1","origId":4259324615413943,"guid":"89a996b9-c388-44c3-824d-36c12cab636f","subtype":"command","commandType":"auto","position":11.0,"command":"lifestyles = health_tracker_sample_agg_pd_df.lifestyle.unique()\nnp.random.seed(10)\n\ndef generate_bootstrap_sample():\n  df = health_tracker_sample_agg_pd_df\n  sample_df_list = []\n  for lifestyle in lifestyles:\n    sample_df_list.append(\n      df[df.lifestyle == lifestyle].sample(5)\n    )\n  return pd.concat(sample_df_list)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"d06732bd-270d-48e1-a248-1c58bcf83333"},{"version":"CommandV1","origId":4259324615413944,"guid":"5572d5ce-c9b4-44a9-ab59-37533b56844a","subtype":"command","commandType":"auto","position":12.0,"command":"generate_bootstrap_sample()","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"fb699655-9060-405f-bd5a-32c222c7a33d"},{"version":"CommandV1","origId":4259324615413945,"guid":"dc0720ad-f6d5-47e8-aa4b-a09e39cadcbc","subtype":"command","commandType":"auto","position":13.0,"command":"%md\n### Generate Subsample Sets","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"2711f213-9bcf-4653-8c87-0ddb8b4a16c8"},{"version":"CommandV1","origId":4259324615413946,"guid":"593d4e46-12af-4579-9869-a22f59a324b7","subtype":"command","commandType":"auto","position":14.0,"command":"subsample_sets = []\n\nfor _ in range(10):\n  subsample_sets.append(generate_bootstrap_sample())","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"5acb7b6c-2c03-432d-a4ee-bef3d5d7ce27"},{"version":"CommandV1","origId":4259324615413947,"guid":"9a16fc11-8a11-4044-8335-19cbbf08e09a","subtype":"command","commandType":"auto","position":15.0,"command":"%md\n### Generate Subsample Sets with List Comprehension","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"a30560d5-1a95-49f2-81b5-dbd463940c84"},{"version":"CommandV1","origId":4259324615413948,"guid":"2e9fbeb0-1104-4ed6-bc02-82e05f06f384","subtype":"command","commandType":"auto","position":16.0,"command":"# ANSWER\nsubsample_sets = [generate_bootstrap_sample() for _ in range(10)]","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"c16fa4e4-c5e7-414a-8538-055da672cb36"},{"version":"CommandV1","origId":4259324615413949,"guid":"6d647f0d-b179-46ed-bfb3-8327aa5df6ff","subtype":"command","commandType":"auto","position":17.0,"command":"%md\n### Display the Number of Samples in Each Subsample Set\n\nUse the `len` built-in function to display the size of each subsample set.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"34fe957a-8e22-459a-9781-b185e19ec1b9"},{"version":"CommandV1","origId":4259324615413950,"guid":"3e6a0d68-b2cc-4e86-b8e8-577fa07d1197","subtype":"command","commandType":"auto","position":18.0,"command":"# ANSWER\n[len(sample_set) for sample_set in subsample_sets]","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"31faddf2-2af5-4725-b7e1-cd9896e7a48a"},{"version":"CommandV1","origId":4259324615413951,"guid":"9920122b-e217-42ae-b3d4-85630fdda36b","subtype":"command","commandType":"auto","position":19.0,"command":"%md\n### Display the Second Subsample Set","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"2ec23e5d-9ab1-4b74-b165-aaaa8ea6d27a"},{"version":"CommandV1","origId":4259324615413952,"guid":"dfab322b-c2aa-4b8d-9ae2-f6d8eb29db04","subtype":"command","commandType":"auto","position":20.0,"command":"# ANSWER\nsubsample_sets[1]","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"aab68398-2e46-47c6-99b2-cb7da3640de8"},{"version":"CommandV1","origId":4259324615413953,"guid":"87c972ee-3984-4775-9873-42f9c034c1c2","subtype":"command","commandType":"auto","position":21.0,"command":"%md\n### Numerically Encode the Target\n\n1. Fit the `LabelEncoder` on the original target (`health_tracker_sample_agg_pd_df[\"lifestyle\"]`)\n2. Transform each dataframe subset using the for-loop","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"ef7b637c-aaf5-42bc-ba2b-7f62cdc3386a"},{"version":"CommandV1","origId":4259324615413954,"guid":"0e8e8bbc-9582-4536-91ac-d486502316ed","subtype":"command","commandType":"auto","position":22.0,"command":"# ANSWER\nfrom sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\nle.fit(health_tracker_sample_agg_pd_df.lifestyle)\n\nfor sample_set in subsample_sets:\n  sample_set[\"lifestyle_encoded\"] = le.transform(sample_set.lifestyle)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"0d96d294-3cfa-4b3c-8356-e33e503e2829"},{"version":"CommandV1","origId":4259324615413955,"guid":"b2d7bb07-2290-41d8-9603-3658dc8b07c8","subtype":"command","commandType":"auto","position":23.0,"command":"%md\n## Design Experiment","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"a3454199-dcd0-4d81-b272-5a5f9a8d507d"},{"version":"CommandV1","origId":4259324615413956,"guid":"843afd6a-d711-4cba-992f-37489f770a34","subtype":"command","commandType":"auto","position":24.0,"command":"from sklearn.model_selection import GridSearchCV\nfrom sklearn.tree import DecisionTreeClassifier","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"a7027560-f941-44f3-b474-5a6ffb58a04d"},{"version":"CommandV1","origId":4259324615413957,"guid":"fa48f1bb-87df-4b4f-a4bf-3d5c6fb581d2","subtype":"command","commandType":"auto","position":25.0,"command":"%md\n### Step 1: Build Subsets of Features.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"8c691093-210e-403f-bfb9-f783d8e6bb15"},{"version":"CommandV1","origId":4259324615413958,"guid":"565603c9-2b68-4ad9-bbdf-3dd0838f803c","subtype":"command","commandType":"auto","position":26.0,"command":"feature_subset = [\"mean_active_heartrate\"]\nexperimental_data_subsets = [\n  sample_set[feature_subset]\n  for sample_set in subsample_sets\n]\n\ntargets = [\n  sample_set[\"lifestyle_encoded\"]\n  for sample_set in subsample_sets\n]","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"87b598c1-645a-468e-9f6e-ed890614005e"},{"version":"CommandV1","origId":4259324615413959,"guid":"97a2876b-c291-4e44-a356-e79a962a8a42","subtype":"command","commandType":"auto","position":27.0,"command":"%md\n### Fit the `GridSearchCV` on each subset using Cross-Validation","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"b3330d3a-837d-4d48-9f6c-0f61c7675ec3"},{"version":"CommandV1","origId":4259324615413960,"guid":"c3ae3f29-4f0b-4b5b-8b33-98275b60249b","subtype":"command","commandType":"auto","position":28.0,"command":"# ANSWER\nexperimental_scores = []\nfor features, target in zip(experimental_data_subsets, targets):\n  gs = GridSearchCV(DecisionTreeClassifier(), param_grid={}, cv=5)\n  gs.fit(features, target)\n  score = gs.cv_results_[\"mean_test_score\"][0]\n  experimental_scores.append(score)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"861712fa-d326-40d5-a8e0-38f0a6f81ce6"},{"version":"CommandV1","origId":4259324615413961,"guid":"60b7fcde-aa5a-4c99-b1df-81b753769afa","subtype":"command","commandType":"auto","position":29.0,"command":"%md\n#### Display Cross-Validation Results","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"8dc05dde-9f72-49b2-bafd-d343619eab2d"},{"version":"CommandV1","origId":4259324615413962,"guid":"49203f79-56fa-4f0c-a4ab-782efd3d8121","subtype":"command","commandType":"auto","position":30.0,"command":"pd.DataFrame(gs.cv_results_).T","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"4ec00581-5208-42c5-a253-d5d2f7d21b3a"},{"version":"CommandV1","origId":4259324615413963,"guid":"65c96014-776a-4d6c-ac9b-58567ff23d8e","subtype":"command","commandType":"auto","position":31.0,"command":"%md\n### Display Experiment Results","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"5fcb35bc-c949-451a-acff-4687743b7f73"},{"version":"CommandV1","origId":4259324615413964,"guid":"3766c55e-e926-44ed-a395-f3b37fb5a95a","subtype":"command","commandType":"auto","position":32.0,"command":"print(feature_subset)\nprint(\"Mean Score: \", np.mean(experimental_scores))\nprint(\"Standard Deviation Score: \", np.std(experimental_scores))","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"089f19ae-1644-458b-b4c5-f6e93c04e158"},{"version":"CommandV1","origId":4259324615413965,"guid":"75a6e20b-63d7-4cd6-ba5e-3b3ce5726387","subtype":"command","commandType":"auto","position":33.0,"command":"%md\n## Define MLflow Experiment Runner","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"22317b93-5f40-4b86-90d7-6fd7296894d4"},{"version":"CommandV1","origId":4259324615413966,"guid":"80f33962-50ac-46b7-8e3b-09911ae15487","subtype":"command","commandType":"auto","position":34.0,"command":"import mlflow\nfrom sklearn.linear_model import LogisticRegression\n\ndef experiment_runner(feature_subset):\n  \"\"\"Helper function to run MLflow experiment on a feature subset.\"\"\"\n  with mlflow.start_run() as run:\n    \"Build Subsets of Features.\"\n    experimental_data_subsets = [\n        sample_set[feature_subset]\n        for sample_set in subsample_sets\n    ]\n\n    targets = [\n      sample_set[\"lifestyle_encoded\"]\n      for sample_set in subsample_sets\n    ]\n\n    \"Fit on each subset using Cross-Validation.\"\n    experimental_scores = []\n    for features, target in zip(experimental_data_subsets, targets):\n      gs = GridSearchCV(LogisticRegression(penalty='none', max_iter=10000), param_grid={}, cv=5)\n      gs.fit(features, target)\n      score = gs.cv_results_[\"mean_test_score\"][0]\n      experimental_scores.append(score)\n\n    \"Record experiment results.\"\n    mlflow.log_param(\"subset\", feature_subset)\n    mlflow.log_metric(\"mean score\", np.mean(experimental_scores))\n    mlflow.log_metric(\"std score\", np.std(experimental_scores))","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"a20c5643-db56-40e8-a407-24a369d89f96"},{"version":"CommandV1","origId":4259324615413967,"guid":"7717ddad-7bfd-4682-af01-04642bf466c7","subtype":"command","commandType":"auto","position":35.0,"command":"experiment_runner([\"mean_active_heartrate\"])","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"e43651e0-b3f6-4ca0-9971-40f7848d61e0"},{"version":"CommandV1","origId":4259324615413968,"guid":"1d052f16-bc88-4a10-b8b8-840cf3e54e47","subtype":"command","commandType":"auto","position":36.0,"command":"%md\n### Generate Feature Subsets\n\nGenerates the superset of all combinations of features (minus the empty set).","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"52a46914-ac27-43bb-830b-2ddce6ef1f6b"},{"version":"CommandV1","origId":4259324615413969,"guid":"b19d7ba6-e4e3-4022-a03b-8f10e4cc96bb","subtype":"command","commandType":"auto","position":37.0,"command":"from itertools import combinations\n\nfeature_columns = health_tracker_sample_agg_pd_df.select_dtypes(exclude=[\"object\"]).columns\nfeature_subsets = []\nfor i in range(1, 5):\n  feature_subsets += [list(feat) for feat in combinations(feature_columns, i)]\n\nfeature_subsets","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"9124cf45-66d1-4f49-b11a-93ccc385f719"},{"version":"CommandV1","origId":4259324615413970,"guid":"a1fe532b-eeb0-42c7-ae46-c4f20e30779e","subtype":"command","commandType":"auto","position":38.0,"command":"%md\n### Run Experiments Using Logistic Regression On Each Feature Subset","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"e5aec0dc-1be8-4e86-8cd2-ebc562561f72"},{"version":"CommandV1","origId":4259324615413971,"guid":"b43619f8-2703-4980-90a1-feaa3c520b32","subtype":"command","commandType":"auto","position":39.0,"command":"for feature_subset in feature_subsets:\n  experiment_runner(feature_subset)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"af72df4b-9b43-476b-87b8-9731efdae900"},{"version":"CommandV1","origId":4259324615413972,"guid":"92a2a4e8-b7f7-4185-87ca-9673bfddcc30","subtype":"command","commandType":"auto","position":40.0,"command":"%md\n### Access MLflow Runs Associated with This Notebook","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"11f6979a-f0b5-4f41-9acf-e38a068265e6"},{"version":"CommandV1","origId":4259324615413973,"guid":"f8e6c179-bb71-4c36-912a-a5fe60e82778","subtype":"command","commandType":"auto","position":41.0,"command":"results = mlflow.search_runs()\ntype(results)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"4518fb61-0469-439e-992d-65d2d3ccd469"},{"version":"CommandV1","origId":4259324615413974,"guid":"33f249f6-3ea9-42a2-89ad-985a193bbebf","subtype":"command","commandType":"auto","position":42.0,"command":"%md\n### Prepare Results Data","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"8e0492e2-39d8-4991-be8e-73d5eba659cc"},{"version":"CommandV1","origId":4259324615413975,"guid":"af16c970-ef95-4ca0-9738-b511354650ac","subtype":"command","commandType":"auto","position":43.0,"command":"results = results[['metrics.mean score', 'metrics.std score', 'params.subset']]\nresults = results[~results[\"params.subset\"].isnull()]\nresults.drop_duplicates(inplace=True)\nresults","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"3a3995b9-12ee-46fc-99bf-2d290e21f48a"},{"version":"CommandV1","origId":4259324615413976,"guid":"92a420b7-9b18-409e-88a1-6ef7c467c612","subtype":"command","commandType":"auto","position":44.0,"command":"%md\n#### Augment Results with `n_terms` Column","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"68b02cc6-7fe7-4fc7-9d96-4ec589eb1eb4"},{"version":"CommandV1","origId":4259324615413977,"guid":"c1e13f18-c8fa-47e7-a595-208d1ff151b8","subtype":"command","commandType":"auto","position":45.0,"command":"results[\"n_terms\"] = results[\"params.subset\"].apply(lambda x: x.count(\",\") + 1)\nresults[\"metrics.mean score\"] = 1 - results[\"metrics.mean score\"]\nresults","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"0778ee49-4600-41ea-8061-c407cab55101"},{"version":"CommandV1","origId":4259324615413978,"guid":"12d6d113-3ea5-48e7-b4a9-dd4ad09a66d7","subtype":"command","commandType":"auto","position":46.0,"command":"%md\n### Plot the Model Results Versus Bias and Variance","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"3cc61579-89f8-4eaa-9990-270f6bac25b9"},{"version":"CommandV1","origId":4259324615413979,"guid":"5c0a8288-a936-4ce6-9e3d-25551eb6655b","subtype":"command","commandType":"auto","position":47.0,"command":"plt.figure(figsize=(20,10))\n\nfor _, (bias, variance, description, n_terms) in results.iterrows():\n   plt.scatter(bias, variance, s=100*n_terms, label=description)\nplt.xlim(0.1, 0.6)\nplt.ylim(0, 0.25)\nplt.legend()\n","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"7b207ab8-116a-4a35-909b-38b4c40377aa"},{"version":"CommandV1","origId":4259324615413980,"guid":"1000248d-ad43-4ba4-8288-a2b90ecea61f","subtype":"command","commandType":"auto","position":48.0,"command":"%md-sandbox\n&copy; 2020 Databricks, Inc. All rights reserved.<br/>\nApache, Apache Spark, Spark and the Spark logo are trademarks of the <a href=\"http://www.apache.org/\">Apache Software Foundation</a>.<br/>\n<br/>\n<a href=\"https://databricks.com/privacy-policy\">Privacy Policy</a> | <a href=\"https://databricks.com/terms-of-use\">Terms of Use</a> | <a href=\"http://help.databricks.com/\">Support</a>","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"joshua.cook@databricks.com","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"b29857f0-13e0-4003-9795-d7a3d9c9d6e6"}],"dashboards":[],"guid":"4ae8418a-6c8c-4afb-959d-fb7ab1f9f0e4","globalVars":{},"iPythonMetadata":null,"inputWidgets":{}}