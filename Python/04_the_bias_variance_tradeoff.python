{"version":"NotebookV1","origId":4259324615413767,"name":"04_the_bias_variance_tradeoff","language":"python","commands":[{"version":"CommandV1","origId":4259324615413768,"guid":"6b139aca-2687-4512-9cd1-cf4ec3a4f9b6","subtype":"command","commandType":"auto","position":1.0,"command":"\n%md-sandbox\n\n<div style=\"text-align: center; line-height: 0; padding-top: 9px;\">\n  <img src=\"https://databricks.com/wp-content/uploads/2018/03/db-academy-rgb-1200px.png\" alt=\"Databricks Learning\" style=\"width: 600px\">\n</div>","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"9d92582e-b23d-4d43-b59e-b3861868723a"},{"version":"CommandV1","origId":4259324615413769,"guid":"6e3fd646-f55c-40c1-826b-08d25ea21c8f","subtype":"command","commandType":"auto","position":2.0,"command":"%md\n# The Bias-Variance Tradeoff","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"cfe61b5c-db04-45ea-86ac-a087657a09db"},{"version":"CommandV1","origId":4259324615413770,"guid":"5d7c087b-99a1-4c33-a7cf-e496228ef2d6","subtype":"command","commandType":"auto","position":3.0,"command":"%md\n## Configuration","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"97a24bf3-fb32-451f-850b-36eed9a9ee0f"},{"version":"CommandV1","origId":4259324615413771,"guid":"71eb6ec5-8b5a-406d-a32e-616dc362f44d","subtype":"command","commandType":"auto","position":4.0,"command":"%run ./includes/configuration","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"de11588b-9b5d-49ee-b1a0-9a597257623f"},{"version":"CommandV1","origId":4259324615413772,"guid":"b0b8f78d-3e3b-4aaa-b400-9b3292c6c27d","subtype":"command","commandType":"auto","position":5.0,"command":"%md\n### Load Data and Scipy Libraries","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"f763b701-0565-42d7-99b0-0989ff688617"},{"version":"CommandV1","origId":4259324615413773,"guid":"b8fb9fa3-952d-44de-abca-ece03095bc38","subtype":"command","commandType":"auto","position":6.0,"command":"%run ./includes/preprocessing","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"90faba7f-5709-4a60-8cbe-943b7b654da3"},{"version":"CommandV1","origId":4259324615413774,"guid":"2fbe2597-12f6-49c7-b82e-d6da5b12acb3","subtype":"command","commandType":"auto","position":7.0,"command":"%md\n## The Bias-Variance Tradeoff\n\nIn this notebook, we are interested in the uncertainty associated with\na particular classification model.\n\nWhen measuring the uncertainty of a model, we are frequently\ninterested in:\n\n- the **bias** of that model\n   - how well it performs classification\n- the **variance** of that model\n   â€” how much the model will differ if fit using different training data\n\nMinimizing bias will frequently increase the variance and vice\nversa. An optimal model will simultaneously minimize both bias and variance.\nThis simultaneous minimization the Bias-Variance Tradeoff.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"7112cf08-5bb6-467a-8711-7e278ebe5832"},{"version":"CommandV1","origId":4259324615413775,"guid":"8a85564a-3bd6-4bfe-bdea-e073783bd417","subtype":"command","commandType":"auto","position":8.0,"command":"%md\n### Model Selection\n\nIn this notebook, we will examine many different models for predicting\nour target prepared using our feature data. Each of these models\nwill be prepared using a different subset of the four features:\n\n- `mean_resting_heartrate`\n- `mean_active_heartrate`\n- `mean_BMI`\n- `mean_VO2_max`\n\nWe will use the estimated bias and variance of each of these models\nto assess which model or models is likely to be the optimal model.\n\nWe will also consider the complexity of each model relative to the\nestimated bias and variance.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"01e97b26-958b-4f07-8185-c9f7f17eaf34"},{"version":"CommandV1","origId":4259324615413776,"guid":"b8b137a7-1a83-4d21-a23d-f5a286913cdb","subtype":"command","commandType":"auto","position":9.0,"command":"%md\n### Estimating Bias and Variance with the Bootstrap\n\nThe **bootstrap** is a method for estimating uncertainty, in this\ncase uncertainty associated with bias and variance.\n\nThe method involves generating a series of subsample sets by\nsampling with replacement from our dataset.\n\nWe will then fit a particular model under examination against\neach of the bootstrap subsample sets.\n\nThe **accuracy mean** across the models fit to each\nsubsample set will be used to estimate **bias**.\n\nThe **accuracy standard deviation** across the models fit to each\nsubsample set will be used to estimate **variance**.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"f836c765-094a-4954-bd0d-920bad418ad9"},{"version":"CommandV1","origId":4259324615413777,"guid":"b70102c5-7113-4a18-abbb-7aac7eedf2a5","subtype":"command","commandType":"auto","position":10.0,"command":"%md\n### Bootstrap Generator\n\nIn the next cell, we define a function to generate bootstrap samples.\n\n\uD83D\uDCAA\uD83C\uDFFC Note that we make sure to sample evenly across each of the\nthree lifestyles.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"f55ebda3-d5a1-469f-94a3-367c6877b2b4"},{"version":"CommandV1","origId":4259324615413778,"guid":"b76476ec-00b4-41b7-87fb-37a36d3a4b03","subtype":"command","commandType":"auto","position":11.0,"command":"lifestyles = health_tracker_sample_agg_pd_df.lifestyle.unique()\nnp.random.seed(10)\n\ndef generate_bootstrap_sample():\n  df = health_tracker_sample_agg_pd_df\n  sample_df_list = []\n  for lifestyle in lifestyles:\n    sample_df_list.append(\n      df[df.lifestyle == lifestyle].sample(5)\n    )\n  return pd.concat(sample_df_list)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"96d7116d-8b6f-4d00-b5eb-015e89e632d1"},{"version":"CommandV1","origId":4259324615413779,"guid":"adfdae0a-8255-4652-aa74-efa82c464c52","subtype":"command","commandType":"auto","position":12.0,"command":"generate_bootstrap_sample()","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"97e7b299-0e4d-4730-b8e8-c03d4e79aa2a"},{"version":"CommandV1","origId":4259324615413780,"guid":"95487161-6872-4e21-a2fd-3ce7f7113570","subtype":"command","commandType":"auto","position":13.0,"command":"%md\n### Generate Subsample Sets","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"8ac1280e-ee1d-4682-87bd-49f43eb1dc0f"},{"version":"CommandV1","origId":4259324615413781,"guid":"7718966d-d76f-40ae-8ac0-cf989c4708a5","subtype":"command","commandType":"auto","position":14.0,"command":"subsample_sets = []\n\nfor _ in range(10):\n  subsample_sets.append(generate_bootstrap_sample())","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"c9189405-8990-4ee3-be37-fe3b3c97205d"},{"version":"CommandV1","origId":4259324615413782,"guid":"5ce852ce-85eb-42cc-ab47-4ddd6df1799d","subtype":"command","commandType":"auto","position":15.0,"command":"%md\n### Generate Subsample Sets with List Comprehension","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"f98fe58d-daee-4b4e-97c9-9de1b40d0478"},{"version":"CommandV1","origId":4259324615413783,"guid":"38461c26-c34a-43e8-b776-3cc30d92a675","subtype":"command","commandType":"auto","position":16.0,"command":"# TODO\nsubsample_sets = [FILL_THIS_IN for _ in range(10)]","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"67bea7c8-c916-46e7-8520-cb29adb3f821"},{"version":"CommandV1","origId":4259324615413784,"guid":"81d66c9c-343d-47cf-b0f2-f749195c4034","subtype":"command","commandType":"auto","position":17.0,"command":"%md\n### Display the Number of Samples in Each Subsample Set\n\nUse the `len` built-in function to display the size of each subsample set.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"4d9c5917-259f-4332-b063-023b5bd12508"},{"version":"CommandV1","origId":4259324615413785,"guid":"e86e49e7-cd34-4281-ab13-d7bc8a1dd331","subtype":"command","commandType":"auto","position":18.0,"command":"# TODO\n[FILL_THIS_IN for sample_set in subsample_sets]","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"7c7fbb92-4ab5-4952-a532-01aca3fd18d1"},{"version":"CommandV1","origId":4259324615413786,"guid":"5a8ec17f-bf98-402c-96bf-912be84a8705","subtype":"command","commandType":"auto","position":19.0,"command":"%md\n### Display the Second Subsample Set","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"03247483-d7f8-4674-817a-ee9ed2cbb58a"},{"version":"CommandV1","origId":4259324615413787,"guid":"a345e28d-a972-41d7-9f89-2d0b0ef7a6e9","subtype":"command","commandType":"auto","position":20.0,"command":"# TODO\nFILL_THIS_IN","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"8f372511-6d22-471c-9ec7-d1343cfefbed"},{"version":"CommandV1","origId":4259324615413788,"guid":"1831018c-9f97-4426-8aba-61fb5e115a4c","subtype":"command","commandType":"auto","position":21.0,"command":"%md\n### Numerically Encode the Target\n\n1. Fit the `LabelEncoder` on the original target (`health_tracker_sample_agg_pd_df[\"lifestyle\"]`)\n2. Transform each dataframe subset using the for-loop","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"e5706a6a-a06e-4c23-8b9c-957abf1115a9"},{"version":"CommandV1","origId":4259324615413789,"guid":"933cde33-dab2-4be4-8504-e36a17eb7b5c","subtype":"command","commandType":"auto","position":22.0,"command":"# TODO\nfrom sklearn.preprocessing import LabelEncoder\nle = LabelEncoder()\nFILL_THIS_IN\n\nfor sample_set in subsample_sets:\n  sample_set[\"lifestyle_encoded\"] = FILL_THIS_IN","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"f678feea-55ee-40fb-bbf0-8d365d8cd8c6"},{"version":"CommandV1","origId":4259324615413790,"guid":"a0041009-db60-419c-a744-d35ee5ed7a5c","subtype":"command","commandType":"auto","position":23.0,"command":"%md\n## Design Experiment","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"e08ea40e-8ee8-466b-a471-40cad9e17aa3"},{"version":"CommandV1","origId":4259324615413791,"guid":"844aac69-f33a-44c4-af38-b3232c895e47","subtype":"command","commandType":"auto","position":24.0,"command":"from sklearn.model_selection import GridSearchCV\nfrom sklearn.tree import DecisionTreeClassifier","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"377df59b-8c2d-4af2-ae7e-67c577221282"},{"version":"CommandV1","origId":4259324615413792,"guid":"14606d57-f118-4e40-bbe3-6d06b3e3a6de","subtype":"command","commandType":"auto","position":25.0,"command":"%md\n### Step 1: Build Subsets of Features.","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"7682afaa-1d6e-4e32-8528-003dc98b3061"},{"version":"CommandV1","origId":4259324615413793,"guid":"849d55db-73ce-4744-b9fc-9d0df9a3dfc9","subtype":"command","commandType":"auto","position":26.0,"command":"feature_subset = [\"mean_active_heartrate\"]\nexperimental_data_subsets = [\n  sample_set[feature_subset]\n  for sample_set in subsample_sets\n]\n\ntargets = [\n  sample_set[\"lifestyle_encoded\"]\n  for sample_set in subsample_sets\n]","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"5f5672a1-0368-4f24-8c28-ee9654210138"},{"version":"CommandV1","origId":4259324615413794,"guid":"f944dce4-2e4f-4908-8cc6-ba514514260c","subtype":"command","commandType":"auto","position":27.0,"command":"%md\n### Fit the `GridSearchCV` on each subset using Cross-Validation","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"87f08c88-1215-4154-bdd1-acf2a851cbf8"},{"version":"CommandV1","origId":4259324615413795,"guid":"cf59f82a-1b11-4d36-909c-f14994477b3b","subtype":"command","commandType":"auto","position":28.0,"command":"# TODO\nexperimental_scores = []\nfor features, target in zip(experimental_data_subsets, targets):\n  gs = GridSearchCV(DecisionTreeClassifier(), param_grid={}, cv=5)\n  FILL_THIS_IN\n  score = gs.cv_results_[\"mean_test_score\"][0]\n  experimental_scores.append(score)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"c0eebe5b-4ebe-4b41-9b3c-ea4eef2fee6f"},{"version":"CommandV1","origId":4259324615413796,"guid":"baa28018-3b51-4895-93e2-315e7f5796e9","subtype":"command","commandType":"auto","position":29.0,"command":"%md\n#### Display Cross-Validation Results","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"06e81906-ce5b-4840-8d43-68cc1da15e61"},{"version":"CommandV1","origId":4259324615413797,"guid":"ddd840f8-bbb7-4432-8349-4514a739e9ac","subtype":"command","commandType":"auto","position":30.0,"command":"pd.DataFrame(gs.cv_results_).T","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"a7f0c2ea-3b72-4deb-908a-7757adaee49e"},{"version":"CommandV1","origId":4259324615413798,"guid":"c2b31572-1a77-46c0-bfad-081db55734ac","subtype":"command","commandType":"auto","position":31.0,"command":"%md\n### Display Experiment Results","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"98d3c134-ac7a-4e56-83d4-ccf9ecbd3cf2"},{"version":"CommandV1","origId":4259324615413799,"guid":"b8005061-763e-4914-a1ed-6695c62d38a5","subtype":"command","commandType":"auto","position":32.0,"command":"print(feature_subset)\nprint(\"Mean Score: \", np.mean(experimental_scores))\nprint(\"Standard Deviation Score: \", np.std(experimental_scores))","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"16927045-f798-4060-a7fa-982adcffe359"},{"version":"CommandV1","origId":4259324615413800,"guid":"48df35a1-4e40-47a5-86fb-cad7bd58bea6","subtype":"command","commandType":"auto","position":33.0,"command":"%md\n## Define MLflow Experiment Runner","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"c9871478-1744-4713-9fda-c1844d76082d"},{"version":"CommandV1","origId":4259324615413801,"guid":"2f9fdbef-1d4c-4632-8f49-c5f8c67f8884","subtype":"command","commandType":"auto","position":34.0,"command":"import mlflow\nfrom sklearn.linear_model import LogisticRegression\n\ndef experiment_runner(feature_subset):\n  \"\"\"Helper function to run MLflow experiment on a feature subset.\"\"\"\n  with mlflow.start_run() as run:\n    \"Build Subsets of Features.\"\n    experimental_data_subsets = [\n        sample_set[feature_subset]\n        for sample_set in subsample_sets\n    ]\n\n    targets = [\n      sample_set[\"lifestyle_encoded\"]\n      for sample_set in subsample_sets\n    ]\n\n    \"Fit on each subset using Cross-Validation.\"\n    experimental_scores = []\n    for features, target in zip(experimental_data_subsets, targets):\n      gs = GridSearchCV(LogisticRegression(penalty='none', max_iter=10000), param_grid={}, cv=5)\n      gs.fit(features, target)\n      score = gs.cv_results_[\"mean_test_score\"][0]\n      experimental_scores.append(score)\n\n    \"Record experiment results.\"\n    mlflow.log_param(\"subset\", feature_subset)\n    mlflow.log_metric(\"mean score\", np.mean(experimental_scores))\n    mlflow.log_metric(\"std score\", np.std(experimental_scores))","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"6b328db4-3b89-434a-83fd-fecf9368ce1a"},{"version":"CommandV1","origId":4259324615413802,"guid":"5d3348fe-8f55-42a5-8eb3-c7ef13ffac1d","subtype":"command","commandType":"auto","position":35.0,"command":"experiment_runner([\"mean_active_heartrate\"])","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"44dde974-0265-4563-9468-67a68589ba45"},{"version":"CommandV1","origId":4259324615413803,"guid":"463780b4-bcf9-4fc1-bc10-69e93776a6fe","subtype":"command","commandType":"auto","position":36.0,"command":"%md\n### Generate Feature Subsets\n\nGenerates the superset of all combinations of features (minus the empty set).","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"59f19871-25fe-48d9-9241-e416bb95f59e"},{"version":"CommandV1","origId":4259324615413804,"guid":"a6e0745b-9114-4ef2-8cd3-6e08bd2309ce","subtype":"command","commandType":"auto","position":37.0,"command":"from itertools import combinations\n\nfeature_columns = health_tracker_sample_agg_pd_df.select_dtypes(exclude=[\"object\"]).columns\nfeature_subsets = []\nfor i in range(1, 5):\n  feature_subsets += [list(feat) for feat in combinations(feature_columns, i)]\n\nfeature_subsets","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"42a79b13-2bb3-4d4a-bcf4-37b7dbde7290"},{"version":"CommandV1","origId":4259324615413805,"guid":"dbecc555-bd02-4ec6-81e9-e60c3c8f3350","subtype":"command","commandType":"auto","position":38.0,"command":"%md\n### Run Experiments Using Logistic Regression On Each Feature Subset","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"9403ce4d-473e-4276-a734-5678dae6da99"},{"version":"CommandV1","origId":4259324615413806,"guid":"54c18a87-79cf-4ede-92de-d72f5f49cf9e","subtype":"command","commandType":"auto","position":39.0,"command":"for feature_subset in feature_subsets:\n  experiment_runner(feature_subset)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"dcd2d2f2-2652-49ed-8074-6f44daaefe33"},{"version":"CommandV1","origId":4259324615413807,"guid":"ad16d8b8-fa84-42a1-9b28-8c620b111189","subtype":"command","commandType":"auto","position":40.0,"command":"%md\n### Access MLflow Runs Associated with This Notebook","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"2b1a93d1-8c47-49d7-9924-30e5d35b06bb"},{"version":"CommandV1","origId":4259324615413808,"guid":"fd97bcdf-3621-485c-addd-0b221ab53bda","subtype":"command","commandType":"auto","position":41.0,"command":"results = mlflow.search_runs()\ntype(results)","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"eacd65d1-4b36-4871-940d-3f6d4f3e18de"},{"version":"CommandV1","origId":4259324615413809,"guid":"83ffedf3-52d4-4527-ae4d-217c53862963","subtype":"command","commandType":"auto","position":42.0,"command":"%md\n### Prepare Results Data","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"1eaace57-e6a4-4f8a-826e-1663ace28a02"},{"version":"CommandV1","origId":4259324615413810,"guid":"3deccf53-78df-4dfb-a847-3136ff2a0011","subtype":"command","commandType":"auto","position":43.0,"command":"results = results[['metrics.mean score', 'metrics.std score', 'params.subset']]\nresults = results[~results[\"params.subset\"].isnull()]\nresults.drop_duplicates(inplace=True)\nresults","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"f67447e1-de0d-4207-87bf-fcb75aa9bd4f"},{"version":"CommandV1","origId":4259324615413811,"guid":"4922d2d7-3827-413a-b653-de4503a51135","subtype":"command","commandType":"auto","position":44.0,"command":"%md\n#### Augment Results with `n_terms` Column","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"203c1cb3-8c38-4ae5-a728-da3f0a71d901"},{"version":"CommandV1","origId":4259324615413812,"guid":"81d5e740-fa08-4645-b6a9-4768844881d6","subtype":"command","commandType":"auto","position":45.0,"command":"results[\"n_terms\"] = results[\"params.subset\"].apply(lambda x: x.count(\",\") + 1)\nresults[\"metrics.mean score\"] = 1 - results[\"metrics.mean score\"]\nresults","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"ec3c6255-14d2-49cc-bed7-e042658a71e6"},{"version":"CommandV1","origId":4259324615413813,"guid":"c2eb3a3c-0ede-489d-8155-e313bb517f10","subtype":"command","commandType":"auto","position":46.0,"command":"%md\n### Plot the Model Results Versus Bias and Variance","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"2a351219-26bb-4e58-8c8f-52f3d429172c"},{"version":"CommandV1","origId":4259324615413814,"guid":"10c6e2d2-35cc-4d05-b3a3-4c541b62655f","subtype":"command","commandType":"auto","position":47.0,"command":"plt.figure(figsize=(20,10))\n\nfor _, (bias, variance, description, n_terms) in results.iterrows():\n   plt.scatter(bias, variance, s=100*n_terms, label=description)\nplt.xlim(0.1, 0.6)\nplt.ylim(0, 0.25)\nplt.legend()\n","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"c1578ead-f2b2-4b6d-b080-3b57e6b78f6f"},{"version":"CommandV1","origId":4259324615413815,"guid":"71f12565-6d2b-4f31-b683-e3694cc21a89","subtype":"command","commandType":"auto","position":48.0,"command":"%md-sandbox\n&copy; 2020 Databricks, Inc. All rights reserved.<br/>\nApache, Apache Spark, Spark and the Spark logo are trademarks of the <a href=\"http://www.apache.org/\">Apache Software Foundation</a>.<br/>\n<br/>\n<a href=\"https://databricks.com/privacy-policy\">Privacy Policy</a> | <a href=\"https://databricks.com/terms-of-use\">Terms of Use</a> | <a href=\"http://help.databricks.com/\">Support</a>","commandVersion":0,"state":"error","results":null,"errorSummary":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"nuid":"ee6159d1-b984-442d-bfc2-e171851d887b"}],"dashboards":[],"guid":"8aff1f06-b054-46a7-b2b2-1bc61e31720b","globalVars":{},"iPythonMetadata":null,"inputWidgets":{}}